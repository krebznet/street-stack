openapi: 3.0.0
paths: {}
info:
  title: Dunk Schema
  version: 1.0.0
components:
  schemas:
    DunkDate:
      type: object
      properties:
        year:
          type: integer
          description: The year component of the date.
        month:
          type: integer
          description: The month component of the date.
        dayOfMonth:
          type: integer
          description: The day of the month component.
      required:
        - year
        - month
        - dayOfMonth
      example:
        year: 2024
        month: 5
        dayOfMonth: 25

    DunkTime:
      type: object
      properties:
        hour:
          type: integer
          description: The hour component of the time.
        minute:
          type: integer
          description: The minute component of the time.
        second:
          type: integer
          description: The second component of the time.
        timeZone:
          type: string
          description: Optional string representing the time zone.
      required:
        - hour
        - minute
        - second
      example:
        hour: 14
        minute: 30
        second: 0
        timeZone: "UTC"

    DunkTimeUnit:
      type: object
      properties:
        seconds:
          type: integer
          description: The number of seconds.
        minutes:
          type: integer
          description: The number of minutes.
        hours:
          type: integer
          description: The number of hours.
        days:
          type: integer
          description: The number of days.
      example:
        seconds: 30
        minutes: 45
        hours: 2
        days: 1

    DunkDateTime:
      type: object
      properties:
        date:
          $ref: '#/components/schemas/DunkDate'
        time:
          $ref: '#/components/schemas/DunkTime'
      example:
        date:
          year: 2024
          month: 5
          dayOfMonth: 25
        time:
          hour: 14
          minute: 30
          second: 0
          timeZone: "UTC"

    DunkTimeRangeType:
      type: string
      enum:
        - Absolute
        - Relative

    DunkTimeRange:
      type: object
      properties:
        type:
          $ref: '#/components/schemas/DunkTimeRangeType'
        startDate:
          type: string
          format: date-time
          description: Start date and time of the range.
        endDate:
          type: string
          format: date-time
          description: End date and time of the range.
        relativeValue:
          type: integer
          description: The value for the relative time range.
        relativeTimeUnit:
          $ref: '#/components/schemas/DunkTimeUnit'
        hasTimeWindow:
          type: boolean
          description: Boolean indicating if a specific time window is included in the range.
        timeWindow:
          $ref: '#/components/schemas/DunkTimeRange'
      required:
        - type
      example:
        type: Relative
        relativeValue: 5
        relativeTimeUnit:
          minutes: 5
        hasTimeWindow: true
        timeWindow:
          type: Absolute
          startDate: "2023-05-25T14:00:00Z"
          endDate: "2023-05-25T14:30:00Z"

    DunkDateTimeRange:
      type: object
      properties:
        start:
          $ref: '#/components/schemas/DunkDateTime'
        end:
          $ref: '#/components/schemas/DunkDateTime'
        hasTimeWindow:
          type: boolean
          description: Boolean indicating if a specific time window is included in the range.
        timeWindow:
          $ref: '#/components/schemas/DunkTimeRange'
      required:
        - start
        - end
      example:
        start:
          date:
            year: 2024
            month: 5
            dayOfMonth: 25
          time:
            hour: 14
            minute: 30
            second: 0
            timeZone: "UTC"
        end:
          date:
            year: 2024
            month: 5
            dayOfMonth: 25
          time:
            hour: 15
            minute: 30
            second: 0
            timeZone: "UTC"
        hasTimeWindow: true
        timeWindow:
          type: Absolute
          startDate: "2023-05-25T14:00:00Z"
          endDate: "2023-05-25T14:30:00Z"

    DunkAbsoluteDateRange:
      type: object
      properties:
        startDate:
          $ref: '#/components/schemas/DunkDate'
        endDate:
          $ref: '#/components/schemas/DunkDate'
        hasTimeWindow:
          type: boolean
          description: Boolean indicating if a specific time window is included in the range.
        timeWindow:
          $ref: '#/components/schemas/DunkTimeRange'
      required:
        - startDate
        - endDate
      example:
        startDate:
          year: 2024
          month: 5
          dayOfMonth: 25
        endDate:
          year: 2024
          month: 5
          dayOfMonth: 26
        hasTimeWindow: true
        timeWindow:
          type: Absolute
          startDate: "2023-05-25T14:00:00Z"
          endDate: "2023-05-25T14:30:00Z"

    DunkAbsoluteTimeRange:
      type: object
      properties:
        startTime:
          $ref: '#/components/schemas/DunkTime'
        endTime:
          $ref: '#/components/schemas/DunkTime'
        hasTimeWindow:
          type: boolean
          description: Boolean indicating if a specific time window is included in the range.
        timeWindow:
          $ref: '#/components/schemas/DunkTimeRange'
      required:
        - startTime
        - endTime
      example:
        startTime:
          hour: 9
          minute: 30
          second: 0
          timeZone: "UTC"
        endTime:
          hour: 16
          minute: 0
          second: 0
          timeZone: "UTC"
        hasTimeWindow: true
        timeWindow:
          type: Absolute
          startDate: "2023-05-25T14:00:00Z"
          endDate: "2023-05-25T14:30:00Z"

    DunkOperator:
      type: string
      enum:
        - greater
        - less
        - greaterOrEqual
        - lessOrEqual
        - notEqual
        - contains
      description: Enumeration of comparison operators.
      example: greater

    DunkStatFunction:
      type: string
      enum:
        - percentChange
        - difference
        - average
        - max
        - min
      description: Enumeration of functions for computing math expressions.
      example: average

    DunkDataType:
      type: string
      enum:
        - Integer
        - Double
        - String
        - Boolean
        - DunkTime
        - DunkDate
        - DunkDateTime
      description: Enumeration of Dunkeric data types.
      example: Integer

    DunkDataFormat:
      type: object
      properties:
        formatType:
          type: string
          enum:
            - roundToDecimalPlaces
            - displayAsPercent
            - addCommas
            - truncateString
            - currency
            - abbreviateNumber
          description: The type of data formatting to apply.
        precision:
          type: integer
          description: Number of decimal places for rounding (used with roundToDecimalPlaces).
        truncateLength:
          type: integer
          description: Maximum length for truncating strings (used with truncateString).
        currencySymbol:
          type: string
          description: Symbol for currency formatting (used with currency).
        abbreviationStyle:
          type: string
          description: Style for abbreviating large numbers (used with abbreviateNumber).
      example:
        formatType: roundToDecimalPlaces
        precision: 2

    DunkTypeAttribute:
      type: object
      properties:
        identifier:
          type: string
          description: Unique string identifier for the attribute.
        name:
          type: string
          description: User-friendly name for the attribute.
        dataType:
          $ref: '#/components/schemas/DunkDataType'
          description: The data type of the attribute.
        dataFormat:
          $ref: '#/components/schemas/DunkDataFormat'
          description: The data format of the attribute.

    DunkType:
      type: object
      properties:
        id:
          type: integer
          description: The numeric ID of the entity type.
        identifier:
          type: string
          description: Unique string identifier for the entity type.
        name:
          type: string
          description: User-friendly name for the entity type.
        attributes:
          type: array
          items:
            $ref: '#/components/schemas/DunkTypeAttribute'
          description: A list of attributes for the entity type.

    DunkBean:
      type: object
      properties:
        type:
          $ref: '#/components/schemas/DunkType'
          description: The type of the entity.
        values:
          type: object
          additionalProperties:
            oneOf:
              - type: integer
              - type: number
              - type: string
              - type: boolean
              - $ref: '#/components/schemas/DunkTime'
              - $ref: '#/components/schemas/DunkDate'
              - $ref: '#/components/schemas/DunkDateTime'
          description: A map of attribute identifiers to their actual values.
